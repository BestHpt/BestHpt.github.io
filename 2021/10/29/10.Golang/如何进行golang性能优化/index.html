<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>ã€Šä¸€æ–‡æ•™ä¼šä½ å¦‚ä½•è¿›è¡ŒGolangæœåŠ¡ä¼˜åŒ–ã€‹ | BestBear</title><meta name="description" content="ã€Šä¸€æ–‡æ•™ä¼šä½ å¦‚ä½•è¿›è¡ŒGolangæœåŠ¡ä¼˜åŒ–ã€‹"><meta name="keywords" content="Golang,æ€§èƒ½ä¼˜åŒ–"><meta name="author" content="ç®€å‡¡ä¸¶"><meta name="copyright" content="ç®€å‡¡ä¸¶"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="ã€Šä¸€æ–‡æ•™ä¼šä½ å¦‚ä½•è¿›è¡ŒGolangæœåŠ¡ä¼˜åŒ–ã€‹"><meta name="twitter:description" content="ã€Šä¸€æ–‡æ•™ä¼šä½ å¦‚ä½•è¿›è¡ŒGolangæœåŠ¡ä¼˜åŒ–ã€‹"><meta name="twitter:image" content="https://codebear-images.oss-cn-beijing.aliyuncs.com/golang.jpeg"><meta property="og:type" content="article"><meta property="og:title" content="ã€Šä¸€æ–‡æ•™ä¼šä½ å¦‚ä½•è¿›è¡ŒGolangæœåŠ¡ä¼˜åŒ–ã€‹"><meta property="og:url" content="http://yoursite.com/2021/10/29/10.Golang/%E5%A6%82%E4%BD%95%E8%BF%9B%E8%A1%8Cgolang%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"><meta property="og:site_name" content="BestBear"><meta property="og:description" content="ã€Šä¸€æ–‡æ•™ä¼šä½ å¦‚ä½•è¿›è¡ŒGolangæœåŠ¡ä¼˜åŒ–ã€‹"><meta property="og:image" content="https://codebear-images.oss-cn-beijing.aliyuncs.com/golang.jpeg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="canonical" href="http://yoursite.com/2021/10/29/10.Golang/%E5%A6%82%E4%BD%95%E8%BF%9B%E8%A1%8Cgolang%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"><link rel="prev" title="æœ€ä½³å®è·µä¹‹Golangé”™è¯¯å¤„ç†" href="http://yoursite.com/2021/11/05/10.Golang/%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E4%B9%8BGolang%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/"><link rel="next" title="ã€Šåç«¯ä»å…¥é—¨åˆ°ç†Ÿæ‚‰-æ­£å¼ç¯‡ã€‹" href="http://yoursite.com/2021/10/23/9.%E5%90%8E%E7%AB%AF%E5%BF%83%E5%BE%97%E5%88%86%E4%BA%AB/%E3%80%8A%E5%90%8E%E7%AB%AF%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%86%9F%E6%82%89-%E6%AD%A3%E5%BC%8F%E7%AF%87%E3%80%8B/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç®€"},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: 'æŒ‰',
    message_next: 'é”®å°†æœ¬é¡µåŠ å…¥ä¹¦ç­¾'
  },
  runtime_unit: 'å¤©',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: true,
  fancybox: false,
  Snackbar: {"bookmark":{"title":"Snackbar.bookmark.title","message_prev":"æŒ‰","message_next":"é”®å°†æœ¬é¡µåŠ å…¥ä¹¦ç­¾"},"chs_to_cht":"ä½ å·²åˆ‡æ¢ä¸ºç¹ä½“","cht_to_chs":"ä½ å·²åˆ‡æ¢ä¸ºç®€ä½“","day_to_night":"ä½ å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼","night_to_day":"ä½ å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  baiduPush: false,
  isHome: false,
  isPost: true
  
}</script><meta name="generator" content="Hexo 4.2.0"></head><body><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">BestBear</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> æ–‡ç« åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-coffee"></i><span> å…³äºä½œè€…</span></a></div><div class="menus_item"><a class="site-page" href="/guestsay/"><i class="fa-fw fa-coffee"></i><span> ç•™è¨€æ¿</span></a></div></div></span><span class="pull_right" id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> æœç´¢</span></a></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://i.loli.net/2020/01/13/ViKAkpCRr5xde1j.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length_num">34</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length_num">16</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length_num">14</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> æ–‡ç« åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-coffee"></i><span> å…³äºä½œè€…</span></a></div><div class="menus_item"><a class="site-page" href="/guestsay/"><i class="fa-fw fa-coffee"></i><span> ç•™è¨€æ¿</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">ç›®å½•</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#1ã€æ¦‚è¿°"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">1ã€æ¦‚è¿°</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#2ã€æ€§èƒ½ä¼˜åŒ–çš„ç›®çš„ï¼ˆWhy-ï¼‰"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">2ã€æ€§èƒ½ä¼˜åŒ–çš„ç›®çš„ï¼ˆWhy?ï¼‰</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#3ã€æ€§èƒ½ä¼˜åŒ–åŸºç¡€ï¼ˆWhat-ï¼‰"><span class="toc_mobile_items-number">3.</span> <span class="toc_mobile_items-text">3ã€æ€§èƒ½ä¼˜åŒ–åŸºç¡€ï¼ˆWhat?ï¼‰</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#3-1-æ€§èƒ½ä¼˜åŒ–æŒ‡æ ‡"><span class="toc_mobile_items-number">3.1.</span> <span class="toc_mobile_items-text">3.1 æ€§èƒ½ä¼˜åŒ–æŒ‡æ ‡</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#4-æ€§èƒ½åˆ†æè¿‡ç¨‹ï¼ˆHow-ï¼‰"><span class="toc_mobile_items-number">4.</span> <span class="toc_mobile_items-text">4. æ€§èƒ½åˆ†æè¿‡ç¨‹ï¼ˆHow?ï¼‰</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#4-1-å¦‚ä½•è·å–æ€§èƒ½å¿«ç…§"><span class="toc_mobile_items-number">4.1.</span> <span class="toc_mobile_items-text">4.1 å¦‚ä½•è·å–æ€§èƒ½å¿«ç…§</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-1-1-å·¥å…·å‹åº”ç”¨è·å–CPUå¿«ç…§"><span class="toc_mobile_items-number">4.1.1.</span> <span class="toc_mobile_items-text">4.1.1 å·¥å…·å‹åº”ç”¨è·å–CPUå¿«ç…§</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-1-1-æœåŠ¡å‹åº”ç”¨CPUåˆ†æ"><span class="toc_mobile_items-number">4.1.2.</span> <span class="toc_mobile_items-text">4.1.1 æœåŠ¡å‹åº”ç”¨CPUåˆ†æ</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#4-2-go-toolåˆ†ææ€§èƒ½å¿«ç…§"><span class="toc_mobile_items-number">4.2.</span> <span class="toc_mobile_items-text">4.2 go toolåˆ†ææ€§èƒ½å¿«ç…§</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-2-1-ç›´è¿æœåŠ¡åˆ†æ"><span class="toc_mobile_items-number">4.2.1.</span> <span class="toc_mobile_items-text">4.2.1 ç›´è¿æœåŠ¡åˆ†æ</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-2-2-å¿«ç…§æ–‡ä»¶-å›¾å½¢åŒ–å·¥å…·"><span class="toc_mobile_items-number">4.2.2.</span> <span class="toc_mobile_items-text">4.2.2 å¿«ç…§æ–‡ä»¶+å›¾å½¢åŒ–å·¥å…·</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#5ã€å¸¸è§æ€§èƒ½ä¼˜åŒ–æ‰‹æ®µ"><span class="toc_mobile_items-number">5.</span> <span class="toc_mobile_items-text">5ã€å¸¸è§æ€§èƒ½ä¼˜åŒ–æ‰‹æ®µ</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#5-1-ä½¿ç”¨é«˜æ•ˆçš„æ€§èƒ½åŒ…"><span class="toc_mobile_items-number">5.1.</span> <span class="toc_mobile_items-text">5.1 ä½¿ç”¨é«˜æ•ˆçš„æ€§èƒ½åŒ…</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5-1-1-Jsonè§£æ"><span class="toc_mobile_items-number">5.1.1.</span> <span class="toc_mobile_items-text">5.1.1 Jsonè§£æ</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5-1-2-æ·±æ‹·è´"><span class="toc_mobile_items-number">5.1.2.</span> <span class="toc_mobile_items-text">5.1.2 æ·±æ‹·è´</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#5-2-ç©ºé—´æ¢æ—¶é—´"><span class="toc_mobile_items-number">5.2.</span> <span class="toc_mobile_items-text">5.2 ç©ºé—´æ¢æ—¶é—´</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#5-3-å­—ç¬¦ä¸²æ‹¼æ¥"><span class="toc_mobile_items-number">5.3.</span> <span class="toc_mobile_items-text">5.3 å­—ç¬¦ä¸²æ‹¼æ¥</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#5-4-å¼‚æ­¥å¤„ç†"><span class="toc_mobile_items-number">5.4.</span> <span class="toc_mobile_items-text">5.4 å¼‚æ­¥å¤„ç†</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#6ã€æ€»ç»“"><span class="toc_mobile_items-number">6.</span> <span class="toc_mobile_items-text">6ã€æ€»ç»“</span></a></li></ol></div></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">ç›®å½•</div><div class="sidebar-toc__progress"><span class="progress-notice">ä½ å·²ç»è¯»äº†</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1ã€æ¦‚è¿°"><span class="toc-number">1.</span> <span class="toc-text">1ã€æ¦‚è¿°</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2ã€æ€§èƒ½ä¼˜åŒ–çš„ç›®çš„ï¼ˆWhy-ï¼‰"><span class="toc-number">2.</span> <span class="toc-text">2ã€æ€§èƒ½ä¼˜åŒ–çš„ç›®çš„ï¼ˆWhy?ï¼‰</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3ã€æ€§èƒ½ä¼˜åŒ–åŸºç¡€ï¼ˆWhat-ï¼‰"><span class="toc-number">3.</span> <span class="toc-text">3ã€æ€§èƒ½ä¼˜åŒ–åŸºç¡€ï¼ˆWhat?ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-æ€§èƒ½ä¼˜åŒ–æŒ‡æ ‡"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 æ€§èƒ½ä¼˜åŒ–æŒ‡æ ‡</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-æ€§èƒ½åˆ†æè¿‡ç¨‹ï¼ˆHow-ï¼‰"><span class="toc-number">4.</span> <span class="toc-text">4. æ€§èƒ½åˆ†æè¿‡ç¨‹ï¼ˆHow?ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-å¦‚ä½•è·å–æ€§èƒ½å¿«ç…§"><span class="toc-number">4.1.</span> <span class="toc-text">4.1 å¦‚ä½•è·å–æ€§èƒ½å¿«ç…§</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-1-å·¥å…·å‹åº”ç”¨è·å–CPUå¿«ç…§"><span class="toc-number">4.1.1.</span> <span class="toc-text">4.1.1 å·¥å…·å‹åº”ç”¨è·å–CPUå¿«ç…§</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-1-æœåŠ¡å‹åº”ç”¨CPUåˆ†æ"><span class="toc-number">4.1.2.</span> <span class="toc-text">4.1.1 æœåŠ¡å‹åº”ç”¨CPUåˆ†æ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-go-toolåˆ†ææ€§èƒ½å¿«ç…§"><span class="toc-number">4.2.</span> <span class="toc-text">4.2 go toolåˆ†ææ€§èƒ½å¿«ç…§</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-1-ç›´è¿æœåŠ¡åˆ†æ"><span class="toc-number">4.2.1.</span> <span class="toc-text">4.2.1 ç›´è¿æœåŠ¡åˆ†æ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-2-å¿«ç…§æ–‡ä»¶-å›¾å½¢åŒ–å·¥å…·"><span class="toc-number">4.2.2.</span> <span class="toc-text">4.2.2 å¿«ç…§æ–‡ä»¶+å›¾å½¢åŒ–å·¥å…·</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5ã€å¸¸è§æ€§èƒ½ä¼˜åŒ–æ‰‹æ®µ"><span class="toc-number">5.</span> <span class="toc-text">5ã€å¸¸è§æ€§èƒ½ä¼˜åŒ–æ‰‹æ®µ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-ä½¿ç”¨é«˜æ•ˆçš„æ€§èƒ½åŒ…"><span class="toc-number">5.1.</span> <span class="toc-text">5.1 ä½¿ç”¨é«˜æ•ˆçš„æ€§èƒ½åŒ…</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-1-Jsonè§£æ"><span class="toc-number">5.1.1.</span> <span class="toc-text">5.1.1 Jsonè§£æ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-2-æ·±æ‹·è´"><span class="toc-number">5.1.2.</span> <span class="toc-text">5.1.2 æ·±æ‹·è´</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-ç©ºé—´æ¢æ—¶é—´"><span class="toc-number">5.2.</span> <span class="toc-text">5.2 ç©ºé—´æ¢æ—¶é—´</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-å­—ç¬¦ä¸²æ‹¼æ¥"><span class="toc-number">5.3.</span> <span class="toc-text">5.3 å­—ç¬¦ä¸²æ‹¼æ¥</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4-å¼‚æ­¥å¤„ç†"><span class="toc-number">5.4.</span> <span class="toc-text">5.4 å¼‚æ­¥å¤„ç†</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6ã€æ€»ç»“"><span class="toc-number">6.</span> <span class="toc-text">6ã€æ€»ç»“</span></a></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(https://codebear-images.oss-cn-beijing.aliyuncs.com/golang.jpeg)"><div id="post-info"><div id="post-title"><div class="posttitle">ã€Šä¸€æ–‡æ•™ä¼šä½ å¦‚ä½•è¿›è¡ŒGolangæœåŠ¡ä¼˜åŒ–ã€‹</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> å‘è¡¨äº 2021-10-29<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> æ›´æ–°äº 2021-11-05</time><span class="post-meta__separator">|</span><span><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Golang/">Golang</a></span><div class="post-meta-wordcount"><i class="fa fa-file-word-o post-meta__icon fa-fw" aria-hidden="true"></i><span>å­—æ•°æ€»è®¡:</span><span class="word-count">3k</span><span class="post-meta__separator">|</span><i class="fa fa-clock-o post-meta__icon fa-fw" aria-hidden="true"></i><span>é˜…è¯»æ—¶é•¿: 11 åˆ†é’Ÿ</span><div class="post-meta-pv-cv"><span class="post-meta__separator">|</span><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h1 id="1ã€æ¦‚è¿°"><a href="#1ã€æ¦‚è¿°" class="headerlink" title="1ã€æ¦‚è¿°"></a>1ã€æ¦‚è¿°</h1><p>å—¨å–½ï¼Œå¤§å®¶å¥½å‘€ï¼æˆ‘æ˜¯ç®€å‡¡ï¼Œä¸€ä½æ¸¸èµ°äºå„äº’è”ç½‘å¤§å‚é—´çš„æ–°æ—¶ä»£å†œæ°‘å·¥ã€‚å¯¹äºCç«¯åœ¨çº¿ä¸šåŠ¡ï¼ŒæœåŠ¡çš„ç¨³å®šæ€§å’Œååé‡å¸¸å¸¸æ˜¯è¯„ä¼°ä¸€ä¸ªç³»ç»Ÿçš„é‡è¦æŒ‡æ ‡ï¼Œæ‰€ä»¥æœ¬æ–‡å°†ä»ä»¥ä¸‹4ç‚¹è¿›è¡Œå±•å¼€ï¼Œé€æ­¥è®²è§£golangä¸­å¦‚ä½•è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ã€‚</p>
<ol>
<li>ä¸ºä»€ä¹ˆè¦åšæ€§èƒ½ä¼˜åŒ–</li>
<li>æ€§èƒ½ä¼˜åŒ–åŸºç¡€</li>
<li>ä¼˜åŒ–æ€è·¯</li>
<li>å¸¸è§çš„ä¼˜åŒ–åœºæ™¯</li>
</ol>
<h1 id="2ã€æ€§èƒ½ä¼˜åŒ–çš„ç›®çš„ï¼ˆWhy-ï¼‰"><a href="#2ã€æ€§èƒ½ä¼˜åŒ–çš„ç›®çš„ï¼ˆWhy-ï¼‰" class="headerlink" title="2ã€æ€§èƒ½ä¼˜åŒ–çš„ç›®çš„ï¼ˆWhy?ï¼‰"></a>2ã€æ€§èƒ½ä¼˜åŒ–çš„ç›®çš„ï¼ˆWhy?ï¼‰</h1><p>æˆ‘ä»¬å¸¸å¸¸åœ¨ä»¥ä¸‹æ—¶å€™è€ƒè™‘åˆ°æ€§èƒ½ä¼˜åŒ–ï¼š</p>
<ol>
<li>æ—¥å¸¸ä¼˜åŒ–ç³»ç»Ÿï¼š<ol>
<li>æ¥å£ç›¸åº”æ—¶é—´ä¼˜åŒ–ï¼Œä»¥æ»¡è¶³å¯¹ä¸Šæ¸¸çš„SLA</li>
<li>CPUä¼˜åŒ–ï¼Œä¿è¯åœ¨çº¿ä¸šåŠ¡cpu idlå¤„äºä¸€ä¸ªè¾ƒé«˜æ°´å¹³ï¼Œé™ä½ä¸šåŠ¡é‡çªå¢å¯¹ç³»ç»Ÿç¨³å®šæ€§å¸¦æ¥çš„å†²å‡»</li>
<li>å†…å­˜ä¼˜åŒ–ï¼Œå‡å°‘å†…å­˜å ç”¨ï¼Œé‡Šæ”¾å¤šä½™çš„æœåŠ¡å™¨èµ„æº</li>
</ol>
</li>
<li>è§£å†³çº¿ä¸Šä¸šåŠ¡é—®é¢˜ï¼š<ol>
<li>æ¥å£ç›¸åº”è¶…æ—¶</li>
<li>CPUåˆ©ç”¨ç‡é£™å‡</li>
</ol>
</li>
</ol>
<h1 id="3ã€æ€§èƒ½ä¼˜åŒ–åŸºç¡€ï¼ˆWhat-ï¼‰"><a href="#3ã€æ€§èƒ½ä¼˜åŒ–åŸºç¡€ï¼ˆWhat-ï¼‰" class="headerlink" title="3ã€æ€§èƒ½ä¼˜åŒ–åŸºç¡€ï¼ˆWhat?ï¼‰"></a>3ã€æ€§èƒ½ä¼˜åŒ–åŸºç¡€ï¼ˆWhat?ï¼‰</h1><h2 id="3-1-æ€§èƒ½ä¼˜åŒ–æŒ‡æ ‡"><a href="#3-1-æ€§èƒ½ä¼˜åŒ–æŒ‡æ ‡" class="headerlink" title="3.1 æ€§èƒ½ä¼˜åŒ–æŒ‡æ ‡"></a>3.1 æ€§èƒ½ä¼˜åŒ–æŒ‡æ ‡</h2><p>åœ¨GolangæœåŠ¡ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸ä»ä»¥ä¸‹4ç‚¹è§¦å‘å»åšæœåŠ¡çš„ä¼˜åŒ–ï¼š</p>
<ul>
<li>CPU profileï¼šæŠ¥å‘Šç¨‹åºçš„ CPU ä½¿ç”¨æƒ…å†µï¼ŒæŒ‰ç…§ä¸€å®šé¢‘ç‡å»é‡‡é›†åº”ç”¨ç¨‹åºåœ¨ CPU å’Œå¯„å­˜å™¨ä¸Šé¢çš„æ•°æ®</li>
<li>Memory Profileï¼ˆHeap Profileï¼‰ï¼šæŠ¥å‘Šç¨‹åºçš„å†…å­˜ä½¿ç”¨æƒ…å†µ</li>
<li>Block Profilingï¼šæŠ¥å‘Š goroutines ä¸åœ¨è¿è¡ŒçŠ¶æ€çš„æƒ…å†µï¼Œå¯ä»¥ç”¨æ¥åˆ†æå’ŒæŸ¥æ‰¾æ­»é”ç­‰æ€§èƒ½ç“¶é¢ˆ</li>
<li>Goroutine Profilingï¼šæŠ¥å‘Š goroutines çš„ä½¿ç”¨æƒ…å†µï¼Œæœ‰å“ªäº› goroutineï¼Œå®ƒä»¬çš„è°ƒç”¨å…³ç³»æ˜¯æ€æ ·çš„</li>
</ul>
<h1 id="4-æ€§èƒ½åˆ†æè¿‡ç¨‹ï¼ˆHow-ï¼‰"><a href="#4-æ€§èƒ½åˆ†æè¿‡ç¨‹ï¼ˆHow-ï¼‰" class="headerlink" title="4. æ€§èƒ½åˆ†æè¿‡ç¨‹ï¼ˆHow?ï¼‰"></a>4. æ€§èƒ½åˆ†æè¿‡ç¨‹ï¼ˆHow?ï¼‰</h1><h2 id="4-1-å¦‚ä½•è·å–æ€§èƒ½å¿«ç…§"><a href="#4-1-å¦‚ä½•è·å–æ€§èƒ½å¿«ç…§" class="headerlink" title="4.1 å¦‚ä½•è·å–æ€§èƒ½å¿«ç…§"></a>4.1 å¦‚ä½•è·å–æ€§èƒ½å¿«ç…§</h2><p>golangä¸­æœ‰ä¸¤ç§ç±»å‹çš„åº”ç”¨ï¼Œå·¥å…·æ€§åº”ç”¨å’ŒæœåŠ¡å‹åº”ç”¨ï¼Œå·¥å…·æ€§å‹åº”ç”¨çš„mainå‡½æ•°ä»…ä¸€æ®µæ—¶é—´ï¼Œæˆ‘ä»¬æœ¬åœ°è·‘å•å…ƒæµ‹è¯•çš„æ€§èƒ½æµ‹è¯•å…¶å®åŸç†å°±æ˜¯åº”ç”¨çš„è¿™ç§ã€‚æœåŠ¡å‹åº”ç”¨ä¸ºé•¿æœŸå­˜æ´»çš„åç«¯åº”ç”¨ï¼Œä¾‹å¦‚RPCæœåŠ¡ï¼ŒHTTPæœåŠ¡ï¼Œæˆ‘ä»¬åç«¯ç³»ç»Ÿé€šå¸¸éƒ½æ˜¯æœåŠ¡å‹åº”ç”¨ã€‚</p>
<h3 id="4-1-1-å·¥å…·å‹åº”ç”¨è·å–CPUå¿«ç…§"><a href="#4-1-1-å·¥å…·å‹åº”ç”¨è·å–CPUå¿«ç…§" class="headerlink" title="4.1.1 å·¥å…·å‹åº”ç”¨è·å–CPUå¿«ç…§"></a>4.1.1 å·¥å…·å‹åº”ç”¨è·å–CPUå¿«ç…§</h3><p>æµ‹è¯•Demoå¦‚ä¸‹ï¼Œè¿™é‡Œç”¨äº†ä¸€ä¸ªå¿«æ’çš„ä¾‹å­ï¼Œåº”ç”¨æ‰§è¡Œç»“æŸåï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªæ–‡ä»¶ï¼Œä¿å­˜äº†æˆ‘ä»¬çš„ CPU profiling æ•°æ®ã€‚å¾—åˆ°é‡‡æ ·æ•°æ®ä¹‹åï¼Œä½¿ç”¨go tool pprofå·¥å…·è¿›è¡Œ CPU æ€§èƒ½åˆ†æã€‚</p>
<pre><code class="go">package main

import (
    &quot;math/rand&quot;
    &quot;os&quot;
    &quot;runtime/pprof&quot;
    &quot;time&quot;
)

func generate(n int) []int {
    rand.Seed(time.Now().UnixNano())
    nums := make([]int, 0)
    for i := 0; i &lt; n; i++ {
        nums = append(nums, rand.Int())
    }
    return nums
}
func bubbleSort(nums []int) {
    for i := 0; i &lt; len(nums); i++ {
        for j := 1; j &lt; len(nums)-i; j++ {
            if nums[j] &lt; nums[j-1] {
                nums[j], nums[j-1] = nums[j-1], nums[j]
            }
        }
    }
}

func main() {
    pprof.StartCPUProfile(os.Stdout)
    defer pprof.StopCPUProfile()
    n := 10
    for i := 0; i &lt; 5; i++ {
        nums := generate(n)
        bubbleSort(nums)
        n *= 10
    }
}</code></pre>
<p>è¿™é‡Œä½¿ç”¨çš„runtime/pprofè¿™ä¸ªåˆ†æå·¥å…·ï¼Œéœ€è¦æŒ‡å®šå¿«ç…§æ‰“å°çš„ä½ç½®ï¼Œè¿™é‡Œæ‰“å°åˆ°æ ‡å‡†è¾“å‡ºäº†ã€‚å¯ä»¥ä¼šä¸ç¨‹åºä¸­çš„æ‰“å°å†²çªã€‚æˆ‘ä»¬å¯ä»¥è‡ªå·±å®ç°å†™åˆ°æ–‡ä»¶ä¸­ï¼Œè¿™é‡Œå¯ä»¥ç”¨å¦ä¸€ä¸ªå¼€æºå·¥å…·æ›¿ä»£<code>github.com/pkg/profile</code>ï¼Œå®ƒä¼šç”Ÿæˆä¸€ä¸ªæ—¥å¿—å¿«ç…§æ–‡ä»¶åˆ°ä¸´æ—¶ç›®å½•ã€‚</p>
<pre><code class="go">package main

import (
    &quot;math/rand&quot;
    &quot;github.com/pkg/profile&quot;
    &quot;time&quot;
)

func generate(n int) []int {
    rand.Seed(time.Now().UnixNano())
    nums := make([]int, 0)
    for i := 0; i &lt; n; i++ {
        nums = append(nums, rand.Int())
    }
    return nums
}
func bubbleSort(nums []int) {
    for i := 0; i &lt; len(nums); i++ {
        for j := 1; j &lt; len(nums)-i; j++ {
            if nums[j] &lt; nums[j-1] {
                nums[j], nums[j-1] = nums[j-1], nums[j]
            }
        }
    }
}

func main() {
    defer profile.Start(profile.MemProfile, profile.MemProfileRate(1)).Stop()
    n := 10
    for i := 0; i &lt; 5; i++ {
        nums := generate(n)
        bubbleSort(nums)
        n *= 10
    }
}</code></pre>
<h3 id="4-1-1-æœåŠ¡å‹åº”ç”¨CPUåˆ†æ"><a href="#4-1-1-æœåŠ¡å‹åº”ç”¨CPUåˆ†æ" class="headerlink" title="4.1.1 æœåŠ¡å‹åº”ç”¨CPUåˆ†æ"></a>4.1.1 æœåŠ¡å‹åº”ç”¨CPUåˆ†æ</h3><p>å¦‚æœä½ çš„åº”ç”¨ç¨‹åºæ˜¯ä¸€ç›´è¿è¡Œçš„ï¼Œæ¯”å¦‚ web åº”ç”¨ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨net/http/pprofåº“ï¼Œå®ƒèƒ½å¤Ÿåœ¨æä¾› HTTP æœåŠ¡è¿›è¡Œåˆ†æã€‚è¿™æ ·ä½ çš„ HTTP æœåŠ¡éƒ½ä¼šå¤šå‡º/debug/pprof endpointï¼Œè®¿é—®å®ƒä¼šå¾—åˆ°ç±»ä¼¼ä¸‹é¢çš„å†…å®¹ï¼š</p>
<pre><code class="go">package main

import (
    &quot;net/http&quot;
    _ &quot;net/http/pprof&quot;
)

func main() {
    http.ListenAndServe(&quot;0.0.0.0:8000&quot;, nil)
}</code></pre>
<p><img alt="image.png" data-src="https://codebear-images.oss-cn-beijing.aliyuncs.com/1635496049023-20047be6-c670-4d35-948a-d3037d4610a9.png" class="lazyload"></p>
<p>ç°åœ¨æ•°æ®å·²ç»å¯ä»¥é‡‡é›†äº†ï¼Œé‚£å¦‚ä½•è·å–å¿«ç…§å‘¢ï¼Ÿæˆ‘ä»¬ä¸Šä¸€æ­¥çš„æ“ä½œï¼Œåœ¨åå°èµ·äº†ä¸€ä¸ªhttp serveræœåŠ¡ï¼Œæˆ‘ä»¬ç›´æ¥ç‚¹å‡»uiä¸­çš„é“¾æ¥å°±å¯ä»¥æ‹¿åˆ°å†…å­˜å¿«ç…§äº†,ä¾‹å¦‚ç‚¹å‡»profileï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‹¿åˆ°ä¸€ä¸ª30sçš„CPUå¿«ç…§ï¼Œæ˜¯ä¸€ä¸ª*.pb.gzç±»å‹çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¯ç”¨äºæˆ‘ä»¬åé¢çš„åˆ†æã€‚</p>
<ul>
<li>/debug/pprof/profileï¼šè®¿é—®è¿™ä¸ªé“¾æ¥ä¼šè‡ªåŠ¨è¿›è¡Œ CPU profilingï¼ŒæŒç»­ 30sï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªæ–‡ä»¶ä¾›ä¸‹è½½</li>
<li>/debug/pprof/heapï¼š Memory Profiling çš„è·¯å¾„ï¼Œè®¿é—®è¿™ä¸ªé“¾æ¥ä¼šå¾—åˆ°ä¸€ä¸ªå†…å­˜ Profiling ç»“æœçš„æ–‡ä»¶</li>
<li>/debug/pprof/blockï¼šblock Profiling çš„è·¯å¾„</li>
<li>/debug/pprof/goroutinesï¼šè¿è¡Œçš„ goroutines åˆ—è¡¨ï¼Œä»¥åŠè°ƒç”¨å…³ç³»</li>
</ul>
<h2 id="4-2-go-toolåˆ†ææ€§èƒ½å¿«ç…§"><a href="#4-2-go-toolåˆ†ææ€§èƒ½å¿«ç…§" class="headerlink" title="4.2 go toolåˆ†ææ€§èƒ½å¿«ç…§"></a>4.2 go toolåˆ†ææ€§èƒ½å¿«ç…§</h2><p>ä¸ç®¡æ˜¯å·¥å…·å‹åº”ç”¨è¿˜æ˜¯æœåŠ¡å‹åº”ç”¨ï¼Œæˆ‘ä»¬ä½¿ç”¨ç›¸åº”çš„ pprof åº“è·å–æ•°æ®ä¹‹åï¼Œä¸‹ä¸€æ­¥çš„éƒ½è¦å¯¹è¿™äº›<strong>æ•°æ®è¿›è¡Œåˆ†æ</strong>ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨go tool pprofå‘½ä»¤è¡Œå·¥å…·ã€‚<br>go tool pprofæœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼ä¸º:</p>
<pre><code class="go">go tool pprof [binary] [source]</code></pre>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li>binary æ˜¯åº”ç”¨çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œç”¨æ¥è§£æå„ç§ç¬¦å·ï¼›ä¾‹å¦‚ï¼šgo tool pprof -http=:9999 /Users/xxxx/pprof/pprof.samples.cpu.001.pb.gz</li>
<li>source è¡¨ç¤º profile æ•°æ®çš„æ¥æºï¼Œå¯ä»¥æ˜¯æœ¬åœ°çš„æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯ http åœ°å€ã€‚æ­¤æ–¹å¼ä¼šåœ¨å‘½ä»¤çª—å£ä¸­æŒ‰ç…§äº¤äº’æ¨¡å¼ä¾‹å¦‚ï¼šgo tool pprof <a href="http://127.0.0.1:8000/debug/pprof/profile" target="_blank" rel="noopener">http://127.0.0.1:8000/debug/pprof/profile</a></li>
</ul>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong> è·å–çš„ Profiling æ•°æ®æ˜¯åŠ¨æ€çš„ï¼Œè¦æƒ³è·å¾—æœ‰æ•ˆçš„æ•°æ®ï¼Œè¯·ä¿è¯åº”ç”¨å¤„äºè¾ƒå¤§çš„è´Ÿè½½ï¼ˆæ¯”å¦‚æ­£åœ¨ç”Ÿæˆä¸­è¿è¡Œçš„æœåŠ¡ï¼Œæˆ–è€…é€šè¿‡å…¶ä»–å‹æµ‹å·¥å…·æ¨¡æ‹Ÿè®¿é—®å‹åŠ›ï¼‰ã€‚å¦åˆ™å¦‚æœåº”ç”¨å¤„äºç©ºé—²çŠ¶æ€ï¼Œå¾—åˆ°çš„ç»“æœå¯èƒ½æ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚</p>
<p>å¯ä»¥å¢åŠ äº›å‚æ•°æ¥è·å–æ›´å¤šä¿¡æ¯ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="go"># æˆ‘ä»¬æƒ³è·å–70sçš„å†…å­˜å¿«ç…§ï¼Œå¯ä»¥å¢åŠ -secondså‚æ•°ï¼š
gotool pprof  -seconds 70 http://127.0.0.1:8912/debug/pprof/profile
# æŒ‡å®šhttpæ¥å£ï¼Œå¯ä»¥åœ¨uiä¸Šçœ‹åˆ°å†…å­˜å¿«ç…§ï¼Œå‚è§æœ¬æ–‡4.2.2
gotool pprof  -http=0.0.0.0:8234 http://127.0.0.1:8912/debug/pprof/profile</code></pre>
<h3 id="4-2-1-ç›´è¿æœåŠ¡åˆ†æ"><a href="#4-2-1-ç›´è¿æœåŠ¡åˆ†æ" class="headerlink" title="4.2.1 ç›´è¿æœåŠ¡åˆ†æ"></a>4.2.1 ç›´è¿æœåŠ¡åˆ†æ</h3><p>go tool + çº¿ä¸ŠæœåŠ¡httpæ¥å£åœ°å€çš„æ–¹å¼ï¼š</p>
<pre><code class="go">go tool pprof http://127.0.0.1:8000/debug/pprof/profile</code></pre>
<p>æ‰§è¡Œä¸Šé¢çš„ä»£ç ä¼šè¿›å…¥äº¤äº’ç•Œé¢å¦‚ä¸‹ï¼š</p>
<pre><code class="go">runtime_pprof $ go tool pprof cpu.pprof
Type: cpu
Time: Jun 28, 2019 at 11:28am (CST)
Duration: 20.13s, Total samples = 1.91mins (568.60%)
Entering interactive mode (type &quot;help&quot; for commands, &quot;o&quot; for options)
(pprof)</code></pre>
<p>æˆ‘ä»¬å¯ä»¥åœ¨äº¤äº’ç•Œé¢è¾“å…¥<code>top3</code>æ¥æŸ¥çœ‹ç¨‹åºä¸­å ç”¨ CPU å‰ 3 ä½çš„å‡½æ•°ï¼š</p>
<pre><code class="go">(pprof) top3
Showing nodes accounting for 100.37s, 87.68% of 114.47s total
Dropped 17 nodes (cum &lt;= 0.57s)
Showing top 3 nodes out of 4
      flat  flat%   sum%        cum   cum%
    42.52s 37.15% 37.15%     91.73s 80.13%  runtime.selectnbrecv
    35.21s 30.76% 67.90%     39.49s 34.50%  runtime.chanrecv
    22.64s 19.78% 87.68%    114.37s 99.91%  main.logicCode</code></pre>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li>flatï¼šå½“å‰å‡½æ•°å ç”¨ CPU çš„è€—æ—¶</li>
<li>flatï¼š: å½“å‰å‡½æ•°å ç”¨ CPU çš„è€—æ—¶ç™¾åˆ†æ¯”</li>
<li>sun%ï¼šå‡½æ•°å ç”¨ CPU çš„è€—æ—¶ç´¯è®¡ç™¾åˆ†æ¯”</li>
<li>cumï¼šå½“å‰å‡½æ•°åŠ ä¸Šè°ƒç”¨å½“å‰å‡½æ•°çš„å‡½æ•°å ç”¨ CPU çš„æ€»è€—æ—¶</li>
<li>cum%ï¼šå½“å‰å‡½æ•°åŠ ä¸Šè°ƒç”¨å½“å‰å‡½æ•°çš„å‡½æ•°å ç”¨ CPU çš„æ€»è€—æ—¶ç™¾åˆ†æ¯”</li>
<li>æœ€åä¸€åˆ—ï¼šå‡½æ•°åç§°</li>
</ul>
<p>åœ¨å¤§å¤šæ•°çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ†æè¿™äº”åˆ—å¾—å‡ºä¸€ä¸ªåº”ç”¨ç¨‹åºçš„è¿è¡Œæƒ…å†µï¼Œå¹¶å¯¹ç¨‹åºè¿›è¡Œä¼˜åŒ–ã€‚<br>æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨<code>list å‡½æ•°å</code>å‘½ä»¤æŸ¥çœ‹å…·ä½“çš„å‡½æ•°åˆ†æï¼Œä¾‹å¦‚æ‰§è¡Œ<code>list logicCode</code>æŸ¥çœ‹æˆ‘ä»¬ç¼–å†™çš„å‡½æ•°çš„è¯¦ç»†åˆ†æã€‚</p>
<pre><code class="go">(pprof) list logicCode
Total: 1.91mins
ROUTINE ================ main.logicCode in .../runtime_pprof/main.go
    22.64s   1.91mins (flat, cum) 99.91% of Total
         .          .     12:func logicCode() {
         .          .     13:   var c chan int
         .          .     14:   for {
         .          .     15:           select {
         .          .     16:           case v := &lt;-c:
    22.64s   1.91mins     17:                   fmt.Printf(&quot;recv from chan, value:%v\n&quot;, v)
         .          .     18:           default:
         .          .     19:
         .          .     20:           }
         .          .     21:   }
         .          .     22:}</code></pre>
<p>é€šè¿‡åˆ†æå‘ç°å¤§éƒ¨åˆ† CPU èµ„æºè¢« 17 è¡Œå ç”¨ï¼Œæˆ‘ä»¬åˆ†æå‡º select è¯­å¥ä¸­çš„ default æ²¡æœ‰å†…å®¹ä¼šå¯¼è‡´ä¸Šé¢çš„<code>case v:=&lt;-c:</code>ä¸€ç›´æ‰§è¡Œã€‚æˆ‘ä»¬åœ¨ default åˆ†æ”¯æ·»åŠ ä¸€è¡Œ<code>time.Sleep(time.Second)</code>å³å¯ã€‚<br>â€‹</p>
<h3 id="4-2-2-å¿«ç…§æ–‡ä»¶-å›¾å½¢åŒ–å·¥å…·"><a href="#4-2-2-å¿«ç…§æ–‡ä»¶-å›¾å½¢åŒ–å·¥å…·" class="headerlink" title="4.2.2 å¿«ç…§æ–‡ä»¶+å›¾å½¢åŒ–å·¥å…·"></a>4.2.2 å¿«ç…§æ–‡ä»¶+å›¾å½¢åŒ–å·¥å…·</h3><p>è¿™ç§å¿«ç…§æ–‡ä»¶çš„æ–¹å¼å¥½å¤„æ˜¯æ›´åŠ ç›´è§‚ï¼Œå¯ä»¥é€šè¿‡å›¾å½¢åŒ–ç•Œé¢æ¥åˆ†æï¼š<br>æƒ³è¦æŸ¥çœ‹å›¾å½¢åŒ–çš„ç•Œé¢é¦–å…ˆéœ€è¦å®‰è£… <a href="https://graphviz.gitlab.io/" target="_blank" rel="noopener">graphviz</a> å›¾å½¢åŒ–å·¥å…·ã€‚Macï¼šbrew install graphviz<br>æ¥ä¸‹æ¥ï¼Œå¯ä»¥ç”¨ go tool pprof åˆ†æè¿™ä»½æ•°æ®</p>
<pre><code class="go">go tool pprof -http=:9999 cpu.pprof</code></pre>
<p>è®¿é—® localhost:9999ï¼Œå¯ä»¥çœ‹åˆ°è¿™æ ·çš„é¡µé¢ï¼š<br><img alt data-src="https://codebear-images.oss-cn-beijing.aliyuncs.com/do1_xqSgVgkMuBtIeulm6fJu.png" class="lazyload"></p>
<p>å½“ç„¶æˆ‘ä»¬è¿˜å¯ä»¥é€‰æ‹©VIEWï¼Œç„¶åçœ‹ç«ç„°å›¾ï¼š<br><img alt data-src="https://codebear-images.oss-cn-beijing.aliyuncs.com/do1_wfg9QPIBkQtZYfFGNHYI.png" class="lazyload"><br>è‡³æ­¤ï¼Œæˆ‘ä»¬å°±æˆåŠŸçš„è·å–äº†æ¯ä¸ªå‡½æ•°å ç”¨çš„CPUæ—¶é—´äº†ï¼Œä¸‹é¢å°±å¯ä»¥å¯¹å ç”¨è¾ƒé•¿çš„å‡½æ•°ï¼ˆå¹³é¡¶å±±éƒ¨åˆ†)è¿›è¡Œä¼˜åŒ–äº†ã€‚<br>â€‹</p>
<h1 id="5ã€å¸¸è§æ€§èƒ½ä¼˜åŒ–æ‰‹æ®µ"><a href="#5ã€å¸¸è§æ€§èƒ½ä¼˜åŒ–æ‰‹æ®µ" class="headerlink" title="5ã€å¸¸è§æ€§èƒ½ä¼˜åŒ–æ‰‹æ®µ"></a>5ã€å¸¸è§æ€§èƒ½ä¼˜åŒ–æ‰‹æ®µ</h1><h2 id="5-1-ä½¿ç”¨é«˜æ•ˆçš„æ€§èƒ½åŒ…"><a href="#5-1-ä½¿ç”¨é«˜æ•ˆçš„æ€§èƒ½åŒ…" class="headerlink" title="5.1 ä½¿ç”¨é«˜æ•ˆçš„æ€§èƒ½åŒ…"></a>5.1 ä½¿ç”¨é«˜æ•ˆçš„æ€§èƒ½åŒ…</h2><h3 id="5-1-1-Jsonè§£æ"><a href="#5-1-1-Jsonè§£æ" class="headerlink" title="5.1.1 Jsonè§£æ"></a>5.1.1 Jsonè§£æ</h3><p>æˆ‘ä»¬å°†Jsonæ•°æ®å­˜æ”¾åˆ°Redisæ—¶ï¼Œå–å‡ºæ—¶éœ€è¦å°†å…¶è§£æä¸ºStructï¼Œä½†goå®˜æ–¹è‡ªå¸¦çš„åº“æ€§èƒ½è¾ƒå·®ï¼Œæ‰€ä»¥å¸¸å¸¸å‡ºç°ç“¶é¢ˆï¼Œå¯é€‰æ‹©<a href="https://github.com/json-iterator" target="_blank" rel="noopener">github.com/json-iterator</a> æ›¿æ¢æ ‡å‡†åº“çš„ encoding/jsonï¼ˆè¯¥åº“ä¸»è¦çš„ä¼˜åŒ–æ‰‹æ®µè¯¦è§ï¼š<a href="http://jsoniter.com/benchmark.html#optimization-usedï¼‰ã€‚" target="_blank" rel="noopener">http://jsoniter.com/benchmark.html#optimization-usedï¼‰ã€‚</a> <a href="https://github.com/json-iterator" target="_blank" rel="noopener">json-iterator</a> å®£ä¼ çš„æ€§èƒ½å¦‚ä¸‹å›¾ï¼š<br><img alt data-src="https://codebear-images.oss-cn-beijing.aliyuncs.com/do1_v7N9CCRnXegVFeqemj53.png" class="lazyload"><br>â€‹</p>
<h3 id="5-1-2-æ·±æ‹·è´"><a href="#5-1-2-æ·±æ‹·è´" class="headerlink" title="5.1.2 æ·±æ‹·è´"></a>5.1.2 æ·±æ‹·è´</h3><p>è¿˜æœ‰æ—¶æˆ‘ä»¬éœ€è¦åœ¨é¡¹ç›®ä¸­ä½¿ç”¨åˆ°æ·±æ‹·è´çš„åœºæ™¯ï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼Œæ·±æ‹·è´æ€§èƒ½å¯¹æ¯”ï¼š<a href="https://www.yuque.com/jinsesihuanian/gpwou5/xg20gn" target="_blank" rel="noopener">https://www.yuque.com/jinsesihuanian/gpwou5/xg20gn</a>ã€‚<br>â€‹</p>
<h2 id="5-2-ç©ºé—´æ¢æ—¶é—´"><a href="#5-2-ç©ºé—´æ¢æ—¶é—´" class="headerlink" title="5.2 ç©ºé—´æ¢æ—¶é—´"></a>5.2 ç©ºé—´æ¢æ—¶é—´</h2><ol>
<li>å¯¹äºå¸¸è§çš„Jsonè§£æé—®é¢˜ï¼ŒRediså¤§keyé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œå¤šçº§ç¼“å­˜ï¼Œå°†Redisä¸­çš„å¤§keyæ•°æ®ç¼“å­˜åˆ°å†…å­˜ä¸­ï¼Œè¿™é‡Œåˆ«å¿˜äº†è€ƒè™‘å¸¦æ¥çš„ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ã€‚</li>
<li>å¯¹äºä¸€äº›mapï¼Œsliceï¼Œå°½é‡åœ¨åˆå§‹åŒ–æ—¶æŒ‡å®šå¤§å°ï¼Œå‡å°‘å†…å­˜çš„é‡æ–°åˆ†é…</li>
</ol>
<h2 id="5-3-å­—ç¬¦ä¸²æ‹¼æ¥"><a href="#5-3-å­—ç¬¦ä¸²æ‹¼æ¥" class="headerlink" title="5.3 å­—ç¬¦ä¸²æ‹¼æ¥"></a>5.3 å­—ç¬¦ä¸²æ‹¼æ¥</h2><p>å­—ç¬¦ä¸²çš„æ‹¼æ¥ä¼˜å…ˆè€ƒè™‘bytes.Bufferã€‚ç”±äºstringç±»å‹æ˜¯ä¸€ä¸ªä¸å¯å˜ç±»å‹ï¼Œä½†æ‹¼æ¥ä¼šåˆ›å»ºæ–°çš„stringã€‚GOä¸­å­—ç¬¦ä¸²æ‹¼æ¥å¸¸è§æœ‰å¦‚ä¸‹å‡ ç§æ–¹å¼ï¼Œå¯¹æ€§èƒ½è¦æ±‚å¾ˆé«˜çš„æœåŠ¡å°½é‡ä½¿ç”¨bytes.Bufferè¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥</p>
<ul>
<li>string + æ“ä½œ ï¼šå¯¼è‡´å¤šæ¬¡å¯¹è±¡çš„åˆ†é…ä¸å€¼æ‹·è´</li>
<li>fmt.Sprintf ï¼šä¼šåŠ¨æ€è§£æå‚æ•°ï¼Œæ•ˆç‡å¥½ä¸å“ªå»</li>
<li>strings.Join ï¼šå†…éƒ¨æ˜¯[]byteçš„append</li>
<li>bytes.Buffer ï¼šå¯ä»¥é¢„å…ˆåˆ†é…å¤§å°ï¼Œå‡å°‘å¯¹è±¡åˆ†é…ä¸æ‹·è´</li>
</ul>
<p><img alt="image.png" data-src="https://codebear-images.oss-cn-beijing.aliyuncs.com/1635499076665-94d9556c-ca7c-40b2-ac7a-d3a3d0f874b1.png" class="lazyload"><br><strong>ä½¿ç”¨strconvåŒ…æ›¿ä»£fmt.Sprintfçš„æ ¼å¼åŒ–æ–¹å¼ï¼Œæ€§èƒ½æ¯”å¯¹è§ï¼š</strong><a href="https://www.cnblogs.com/yumuxu/p/4077234.html" target="_blank" rel="noopener">https://www.cnblogs.com/yumuxu/p/4077234.html</a><br>â€‹</p>
<h2 id="5-4-å¼‚æ­¥å¤„ç†"><a href="#5-4-å¼‚æ­¥å¤„ç†" class="headerlink" title="5.4 å¼‚æ­¥å¤„ç†"></a>5.4 å¼‚æ­¥å¤„ç†</h2><p>æ—¢ç„¶é€‰ç”¨äº†Golangï¼Œè‡ªç„¶è¦ç”¨åˆ°å®ƒç®€å•æ˜“ç”¨çš„å¹¶å‘æœºåˆ¶å•¦ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¸€äº›ä¸å½±å“ä¸»æµç¨‹çš„æ“ä½œå®Œå…¨å¯ä»¥å¼‚æ­¥åŒ–ï¼Œä¾‹å¦‚å‘é€é‚®ä»¶ã€å†™æ—¥å¿—ç­‰ã€‚å¯ä»¥æŠŠä¸€äº›ä¸šåŠ¡åœºæ™¯å¹¶è¡Œå¤„ç†ï¼Œä¾‹å¦‚ä½ è¦ä¸€æ¬¡æ€§è¯»å–å¤šä¸ªæ–‡ä»¶ã€‚<br>â€‹</p>
<h1 id="6ã€æ€»ç»“"><a href="#6ã€æ€»ç»“" class="headerlink" title="6ã€æ€»ç»“"></a>6ã€æ€»ç»“</h1><p>ä»£ç å±‚é¢çš„ä¼˜åŒ–ï¼Œæ˜¯ us çº§åˆ«çš„ï¼Œè€Œé’ˆå¯¹ä¸šåŠ¡å¯¹å­˜å‚¨è¿›è¡Œä¼˜åŒ–ï¼Œå¯ä»¥åšåˆ° ms çº§åˆ«çš„ï¼Œæ‰€ä»¥ä¼˜åŒ–è¶Šé è¿‘åº”ç”¨å±‚æ•ˆæœè¶Šå¥½ã€‚å¯¹äºä»£ç å±‚é¢ï¼Œä¼˜åŒ–çš„æ­¥éª¤æ˜¯ï¼š</p>
<ol>
<li>åˆ©ç”¨å‹æµ‹å·¥å…·æ¨¡æ‹Ÿåœºæ™¯æ‰€éœ€çš„çœŸå®æµé‡ã€‚å‹æµ‹å·¥å…·æ¨èä½¿ç”¨ <a href="https://github.com/wg/wrk" target="_blank" rel="noopener">https://github.com/wg/wrk</a> æˆ– <a href="https://github.com/adjust/go-wrk" target="_blank" rel="noopener">https://github.com/adjust/go-wrk</a></li>
<li>pprof ç­‰å·¥å…·æŸ¥çœ‹æœåŠ¡çš„ CPUã€MEM è€—æ—¶</li>
<li>é”å®šå¹³é¡¶å±±é€»è¾‘ï¼Œçœ‹ä¼˜åŒ–å¯èƒ½æ€§ï¼šå¼‚æ­¥å¤„ç†ï¼Œç©ºé—´æ¢æ—¶é—´ï¼Œä½¿ç”¨é«˜æ€§èƒ½åŒ… ç­‰</li>
<li>å±€éƒ¨ä¼˜åŒ–å®Œå†™ benchmark å·¥å…·æŸ¥çœ‹ä¼˜åŒ–æ•ˆæœ</li>
<li>æ•´ä½“ä¼˜åŒ–å®Œå›åˆ°æ­¥éª¤ä¸€ï¼Œé‡æ–°è¿›è¡Œ å‹æµ‹+pprof çœ‹æ•ˆæœï¼Œçœ‹è€—æ—¶èƒ½å¦æ»¡è¶³è¦æ±‚ï¼Œå¦‚æœæ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œé‚£å°±æ¢å­˜å‚¨å§~ğŸ˜­</li>
</ol>
<p>â€‹    åç»­æˆ‘ä¼šç»™å¤§å®¶å‡ºä¸€ç¯‡å…³äºGolangæœåŠ¡çš„ä»£ç å¼€å‘å»ºè®®ï¼Œæˆ‘ä»¬ä¸‹æœŸè§ï¼ŒPeaceğŸ˜˜</p>
<blockquote>
<p>æˆ‘æ˜¯ç®€å‡¡ï¼Œä¸€ä¸ªåŠ±å¿—ç”¨æœ€ç®€å•çš„è¯­è¨€ï¼Œæè¿°æœ€å¤æ‚é—®é¢˜çš„æ–°æ—¶ä»£å†œæ°‘å·¥ã€‚<strong>æ±‚ç‚¹èµï¼Œæ±‚å…³æ³¨</strong>ï¼Œå¦‚æœä½ å¯¹æ­¤ç¯‡æ–‡ç« æœ‰ä»€ä¹ˆç–‘æƒ‘ï¼Œæ¬¢è¿åœ¨æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·ä¸­ç•™è¨€ï¼Œæˆ‘è¿˜å¯ä»¥ä¸ºä½ æä¾›ä»¥ä¸‹å¸®åŠ©ï¼š</p>
<ul>
<li>å¸®åŠ©å»ºç«‹è‡ªå·±çš„çŸ¥è¯†ä½“ç³»</li>
<li>äº’è”ç½‘çœŸå®é«˜å¹¶å‘åœºæ™¯å®æˆ˜è®²è§£</li>
<li>ä¸å®šæœŸåˆ†äº«Golangã€Javaç›¸å…³ä¸šå†…çš„ç»å…¸åœºæ™¯å®è·µ<br>æˆ‘çš„åšå®¢ï¼š<a href="https://besthpt.github.io/" target="_blank" rel="noopener">https://besthpt.github.io/</a><br>å¾®ä¿¡å…¬ä¼—å·ï¼šâ€ç®€å‡¡ä¸¶â€</li>
</ul>
</blockquote>
<p><img alt="img" data-src="https://codebear-images.oss-cn-beijing.aliyuncs.com/1633094381436-599e5e08-34bf-4d7a-88fb-e9a4b30ebea3.png" class="lazyload"></p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="mailto:undefined">ç®€å‡¡ä¸¶</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="http://yoursite.com/2021/10/29/10.Golang/%E5%A6%82%E4%BD%95%E8%BF%9B%E8%A1%8Cgolang%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">http://yoursite.com/2021/10/29/10.Golang/%E5%A6%82%E4%BD%95%E8%BF%9B%E8%A1%8Cgolang%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="http://yoursite.com">BestBear</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Golang/">Golang    </a><a class="post-meta__tags" href="/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">æ€§èƒ½ä¼˜åŒ–    </a></div><div class="post_share"><div class="social-share" data-image="https://codebear-images.oss-cn-beijing.aliyuncs.com/golang.jpeg" data-sites="wechat,weibo,qq,facebook,twitter"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2021/11/05/10.Golang/%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E4%B9%8BGolang%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/"><img class="prev_cover lazyload" data-src="https://codebear-images.oss-cn-beijing.aliyuncs.com/src=http___i2.wp.com_techlogitic.net_wp-content_uploads_2017_05_error-924-1.jpg_fit=950,500&amp;ssl=1&amp;refer=http___i2.wp.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info"><span>æœ€ä½³å®è·µä¹‹Golangé”™è¯¯å¤„ç†</span></div></a></div><div class="next-post pull_right"><a href="/2021/10/23/9.%E5%90%8E%E7%AB%AF%E5%BF%83%E5%BE%97%E5%88%86%E4%BA%AB/%E3%80%8A%E5%90%8E%E7%AB%AF%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%86%9F%E6%82%89-%E6%AD%A3%E5%BC%8F%E7%AF%87%E3%80%8B/"><img class="next_cover lazyload" data-src="https://codebear-images.oss-cn-beijing.aliyuncs.com/istockphoto-843790104-170667a.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info"><span>ã€Šåç«¯ä»å…¥é—¨åˆ°ç†Ÿæ‚‰-æ­£å¼ç¯‡ã€‹</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> ç›¸å…³æ¨è</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2021/11/05/10.Golang/æœ€ä½³å®è·µä¹‹Golangé”™è¯¯å¤„ç†/" title="æœ€ä½³å®è·µä¹‹Golangé”™è¯¯å¤„ç†"><img class="relatedPosts_cover lazyload"data-src="https://codebear-images.oss-cn-beijing.aliyuncs.com/src=http___i2.wp.com_techlogitic.net_wp-content_uploads_2017_05_error-924-1.jpg_fit=950,500&ssl=1&refer=http___i2.wp.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2021-11-05</div><div class="relatedPosts_title">æœ€ä½³å®è·µä¹‹Golangé”™è¯¯å¤„ç†</div></div></a></div><div class="relatedPosts_item"><a href="/2021/11/17/10.Golang/Golangæ—¥å¿—å…¥é—¨ä¸æŠ€æœ¯é€‰å‹ (1)/" title="Golangæ—¥å¿—å…¥é—¨ä¸æŠ€æœ¯é€‰å‹"><img class="relatedPosts_cover lazyload"data-src="https://codebear-images.oss-cn-beijing.aliyuncs.com/1c862b80-fca1-11e9-9d17-06c540ba1f1b.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2021-11-17</div><div class="relatedPosts_title">Golangæ—¥å¿—å…¥é—¨ä¸æŠ€æœ¯é€‰å‹</div></div></a></div><div class="relatedPosts_item"><a href="/2021/11/19/10.Golang/Zap æ—¥å¿—åº“å®è·µ/" title="Zapæ—¥å¿—åº“å®è·µ"><img class="relatedPosts_cover lazyload"data-src="https://codebear-images.oss-cn-beijing.aliyuncs.com/{F8913C99-633F-3853-A3EE-D82950B5ED74}.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2021-11-19</div><div class="relatedPosts_title">Zapæ—¥å¿—åº“å®è·µ</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> è¯„è®º</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var notify = false == true ? true : false;
var verify = false == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'POlJROSsMvr6BdUPhPaqFdlj-gzGzoHsz',
  appKey:'JhPOeqEkpBUGVUNuYYxRCvUt',
  placeholder:'Please leave your footprints',
  avatar:'monsterid',
  guest_info:guest_info,
  pageSize:'10',
  lang:'zh-cn',
  recordIP: true
});</script></div></div></main><footer id="footer" style="background-image: url(https://codebear-images.oss-cn-beijing.aliyuncs.com/golang.jpeg)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By ç®€å‡¡ä¸¶</div><div class="framework-info"><span>é©±åŠ¨ </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="é˜…è¯»æ¨¡å¼"></i><i class="fa fa-plus" id="font_plus" title="æ”¾å¤§å­—ä½“"></i><i class="fa fa-minus" id="font_minus" title="ç¼©å°å­—ä½“"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="ç®€ç¹è½¬æ¢" target="_self">ç¹</a><i class="darkmode fa fa-moon-o" id="darkmode" title="å¤œé—´æ¨¡å¼"></i></div><div id="rightside-config-show"><div id="rightside_config" title="è®¾ç½®"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="ç›®å½•" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="å›åˆ°é¡¶éƒ¨" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script id="canvas_nest" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/canvas-nest.js"></script><script src="https://cdn.jsdelivr.net/npm/activate-power-mode/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false; 
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><script src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/click_heart.js"></script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">æœ¬åœ°æœç´¢</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« "></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>ç”±</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>æä¾›æ”¯æŒ</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="/live2d_models/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2d_models/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.5,"jsonPath":"/live2d_models/assets/tororo.model.json"},"display":{"superSample":2,"width":200,"height":200,"position":"right","hOffset":30,"vOffset":20},"mobile":{"show":false,"scale":0.05},"react":{"opacityDefault":0.6,"opacityOnHover":0.2},"log":false});</script></body></html>